# 自定义窗口标题栏实现说明

## 概述

已成功实现类似参考截图的自定义窗口标题栏，包含以下功能：

- ✅ 自定义标题栏设计
- ✅ 窗口拖拽功能
- ✅ 最小化、最大化/还原、关闭按钮
- ✅ 响应式按钮悬停效果
- ✅ 支持明暗主题切换
- ✅ 毛玻璃背景效果

## 主要修改内容

### 1. Tauri 配置 (`src-tauri/tauri.conf.json`)

```json
{
  "title": "lightsync",
  "width": 1200,
  "height": 800,
  "minWidth": 800,
  "minHeight": 600,
  "decorations": false, // 禁用系统标题栏
  "transparent": false,
  "resizable": true
}
```

**关键设置：**

- `decorations: false` - 移除系统默认标题栏
- 设置了合理的默认窗口大小和最小尺寸

### 2. 自定义标题栏组件 (`src/components/TitleBar.tsx`)

**主要功能：**

- 应用图标和标题显示
- 窗口控制按钮（最小化、最大化、关闭）
- 拖拽区域实现
- 最大化状态监听和图标切换

**技术亮点：**

```typescript
// 窗口拖拽
data - tauri - drag - region

// 状态监听
appWindow.onResized()
appWindow.isMaximized()

// 窗口控制
appWindow.minimize()
appWindow.toggleMaximize()
appWindow.close()
```

### 3. 样式设计

**视觉特性：**

- 毛玻璃效果：`backdrop-blur-md`
- 半透明背景：`bg-background/80`
- 优雅的边框：`border-b border-divider/50`
- 阴影效果：`shadow-sm`

**交互效果：**

- 按钮悬停背景色变化
- 关闭按钮红色高亮
- 平滑的过渡动画

## 文件结构

```
src/
├── components/
│   ├── TitleBar.tsx          # 自定义标题栏组件
│   ├── ThemeSwitch.tsx       # 主题切换组件
│   └── ConfigTest.tsx
├── styles/
│   └── titlebar.css          # 标题栏专用样式
├── App.tsx                   # 应用主组件（已更新）
└── main.tsx                  # 入口文件（已导入样式）

src-tauri/
└── tauri.conf.json           # Tauri 配置（已更新）
```

## 使用说明

### 运行应用

```bash
# 开发模式
pnpm tauri dev

# 构建
pnpm tauri build
```

### 自定义标题栏

如需修改标题栏样式，请编辑：

- `src/components/TitleBar.tsx` - 组件结构和逻辑
- `src/styles/titlebar.css` - 额外样式定义

### 修改应用图标/标题

在 `TitleBar.tsx` 中修改：

```tsx
{
  /* 应用图标 */
}
;<div className="h-6 w-6 rounded-lg bg-gradient-to-br from-cyan-400 via-blue-500 to-blue-600">
  L {/* 修改此处的字母 */}
</div>

{
  /* 应用标题 */
}
;<span className="text-sm font-semibold text-foreground">LightSync {/* 修改此处的标题 */}</span>
```

## 兼容性

- ✅ Windows 10/11
- ✅ macOS
- ✅ Linux

## 注意事项

1. **窗口拖拽区域**：确保 `data-tauri-drag-region` 属性正确设置
2. **按钮点击**：按钮元素不应在拖拽区域内，已通过 CSS 处理
3. **主题适配**：标题栏样式自动适配明暗主题
4. **性能**：使用了防抖和状态缓存，确保流畅运行

## 后续优化建议

- [ ] 添加双击标题栏最大化/还原功能
- [ ] 添加右键菜单（如窗口置顶等）
- [ ] 支持自定义标题栏高度
- [ ] 添加更多窗口控制选项（如最小化到托盘）
- [ ] 优化不同 DPI 下的显示效果
