# LightSync - iFlow CLI é¡¹ç›®æŒ‡å—

> ğŸ“… æœ€åæ›´æ–°: 2025-11-10  
> ğŸ—ï¸ é¡¹ç›®çŠ¶æ€: å¼€å‘ä¸­ (Phase 1 è¿›è¡Œä¸­)  
> ğŸ“Š æ•´ä½“è¿›åº¦: 12% (4/34 æ ¸å¿ƒä»»åŠ¡å®Œæˆ)  
> ğŸ¯ å½“å‰é˜¶æ®µ: Phase 1 - é¡¹ç›®åŸºç¡€æ­å»º (67% å®Œæˆ, 4/6 ä»»åŠ¡å®Œæˆ)

---

## ğŸ“– é¡¹ç›®æ¦‚è¿°

**LightSync** æ˜¯ä¸€ä¸ªåŸºäº Tauri 2.0 + React 19 + Rust æ„å»ºçš„è½»é‡çº§è·¨è®¾å¤‡æ–‡ä»¶åŒæ­¥å·¥å…·ã€‚é¡¹ç›®æ—¨åœ¨é€šè¿‡ WebDAV åè®®å®ç°é«˜æ•ˆã€å®‰å…¨ã€å¯å®šåˆ¶çš„æ–‡ä»¶åŒæ­¥ï¼ŒåŒæ—¶ä½œä¸ºå­¦ä¹ ç°ä»£æŠ€æœ¯æ ˆçš„å®æˆ˜é¡¹ç›®ã€‚

### æ ¸å¿ƒç‰¹æ€§

- ğŸš€ **è½»é‡é«˜æ•ˆ**: å†…å­˜å ç”¨ < 50MBï¼Œå¯åŠ¨æ—¶é—´ < 2ç§’
- ğŸ”„ **åŒå‘åŒæ­¥**: æ”¯æŒæœ¬åœ°ä¸äº‘ç«¯çš„åŒå‘æ–‡ä»¶åŒæ­¥
- ğŸŒ **WebDAV åè®®**: å…¼å®¹ä¸»æµ WebDAV æœåŠ¡å•†
- âš™ï¸ **é«˜åº¦å¯é…ç½®**: çµæ´»çš„åŒæ­¥ç­–ç•¥å’Œå†²çªå¤„ç†
- ğŸ”’ **å®‰å…¨å¯é **: å¯†ç åŠ å¯†å­˜å‚¨ï¼Œæ”¯æŒ HTTPS
- ğŸ¨ **ç°ä»£ç•Œé¢**: NextUI + TailwindCSSï¼Œæ”¯æŒæ·±è‰²æ¨¡å¼

### æŠ€æœ¯æ ˆ

**å‰ç«¯æŠ€æœ¯**:

- React 19.1.0 + TypeScript 5.8.3
- NextUI 2.4.8 (UI ç»„ä»¶åº“)
- TailwindCSS 3.4.18 (æ ·å¼æ¡†æ¶)
- next-themes 0.4.6 (ä¸»é¢˜ç®¡ç†)
- framer-motion 12.23.24 (åŠ¨ç”»åº“)
- Vite 7.0.4 (æ„å»ºå·¥å…·)

**åç«¯æŠ€æœ¯**:

- Rust (Edition 2021)
- Tauri 2.0 (æ¡Œé¢åº”ç”¨æ¡†æ¶)
- tokio 1.x (å¼‚æ­¥è¿è¡Œæ—¶)
- notify 6.x (æ–‡ä»¶ç³»ç»Ÿç›‘æ§)
- serde 1.x (åºåˆ—åŒ–/ååºåˆ—åŒ–)
- serde_json 1.x (JSON å¤„ç†)
- thiserror 1.0 (é”™è¯¯å¤„ç†)
- chrono 0.4 (æ—¥æœŸæ—¶é—´å¤„ç†)

**Tauri æ’ä»¶**:

- tauri-plugin-store 2.x (é…ç½®å­˜å‚¨)
- tauri-plugin-sql 2.x (SQLite æ•°æ®åº“)
- tauri-plugin-fs 2.4.4 (æ–‡ä»¶ç³»ç»Ÿè®¿é—®)
- tauri-plugin-opener 2.x (æ‰“å¼€æ–‡ä»¶/URL)

---

## ğŸ—ï¸ é¡¹ç›®æ¶æ„

### ç›®å½•ç»“æ„

```
LightSync/
â”œâ”€â”€ src/                          # React å‰ç«¯æºç 
â”‚   â”œâ”€â”€ components/               # React ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ TitleBar.tsx         # è‡ªå®šä¹‰æ ‡é¢˜æ 
â”‚   â”‚   â”œâ”€â”€ ThemeSwitch.tsx      # ä¸»é¢˜åˆ‡æ¢å™¨
â”‚   â”‚   â”œâ”€â”€ ConfigTest.tsx       # é…ç½®æµ‹è¯•ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ DatabaseTest.tsx     # æ•°æ®åº“æµ‹è¯•ç»„ä»¶
â”‚   â”‚   â””â”€â”€ ErrorBoundary.tsx    # é”™è¯¯è¾¹ç•Œ
â”‚   â”œâ”€â”€ hooks/                   # React Hooks
â”‚   â”‚   â””â”€â”€ useConfig.ts         # é…ç½®ç®¡ç† Hook
â”‚   â”œâ”€â”€ types/                   # TypeScript ç±»å‹å®šä¹‰
â”‚   â”‚   â””â”€â”€ config.ts            # é…ç½®ç±»å‹
â”‚   â”œâ”€â”€ utils/                   # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ database.ts          # æ•°æ®åº“æ“ä½œ
â”‚   â”‚   â””â”€â”€ store.ts             # é…ç½®å­˜å‚¨
â”‚   â”œâ”€â”€ styles/                  # æ ·å¼æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ titlebar.css         # æ ‡é¢˜æ æ ·å¼
â”‚   â”œâ”€â”€ App.tsx                  # åº”ç”¨ä¸»ç»„ä»¶
â”‚   â”œâ”€â”€ main.tsx                 # åº”ç”¨å…¥å£
â”‚   â””â”€â”€ index.css                # å…¨å±€æ ·å¼
â”‚
â”œâ”€â”€ src-tauri/                   # Rust åç«¯æºç 
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ main.rs              # åº”ç”¨å…¥å£
â”‚   â”‚   â”œâ”€â”€ lib.rs               # åº“å…¥å£
â”‚   â”‚   â”œâ”€â”€ error.rs             # ç»Ÿä¸€é”™è¯¯å¤„ç†
â”‚   â”‚   â”œâ”€â”€ config.rs            # é…ç½®ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ config_watcher.rs    # é…ç½®æ–‡ä»¶ç›‘å¬
â”‚   â”‚   â”œâ”€â”€ constants.rs         # å¸¸é‡å®šä¹‰
â”‚   â”‚   â””â”€â”€ database.rs          # æ•°æ®åº“æ¨¡å—
â”‚   â”œâ”€â”€ migrations/              # æ•°æ®åº“è¿ç§»
â”‚   â”‚   â””â”€â”€ 001_initial.sql      # åˆå§‹æ•°æ®åº“æ¶æ„
â”‚   â”œâ”€â”€ capabilities/            # Tauri æƒé™é…ç½®
â”‚   â”œâ”€â”€ icons/                   # åº”ç”¨å›¾æ ‡
â”‚   â”œâ”€â”€ Cargo.toml               # Rust ä¾èµ–é…ç½®
â”‚   â”œâ”€â”€ tauri.conf.json          # Tauri åº”ç”¨é…ç½®
â”‚   â””â”€â”€ build.rs                 # æ„å»ºè„šæœ¬
â”‚
â”œâ”€â”€ docs/                        # é¡¹ç›®æ–‡æ¡£
â”‚   â””â”€â”€ md/
â”‚       â”œâ”€â”€ é¡¹ç›®éœ€æ±‚åˆ†æ.md       # è¯¦ç»†éœ€æ±‚è§„æ ¼
â”‚       â”œâ”€â”€ é¡¹ç›®è¿›åº¦æ¸…å•.md       # å¼€å‘è¿›åº¦è·Ÿè¸ª
â”‚       â”œâ”€â”€ é¡¹ç›®å®ç°æ­¥éª¤.md       # å®æ–½è®¡åˆ’
â”‚       â””â”€â”€ è‡ªå®šä¹‰æ ‡é¢˜æ è¯´æ˜.md   # æ ‡é¢˜æ å®ç°æ–‡æ¡£
â”‚
â”œâ”€â”€ package.json                 # Node.js ä¾èµ–é…ç½®
â”œâ”€â”€ pnpm-lock.yaml              # ä¾èµ–é”å®šæ–‡ä»¶
â”œâ”€â”€ tsconfig.json               # TypeScript é…ç½®
â”œâ”€â”€ vite.config.ts              # Vite é…ç½®
â”œâ”€â”€ tailwind.config.js          # TailwindCSS é…ç½®
â””â”€â”€ README.md                   # é¡¹ç›®è¯´æ˜
```

### æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å‰ç«¯å±‚ (React)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  UI ç»„ä»¶     â”‚  â”‚  Hooks       â”‚  â”‚  å·¥å…·å‡½æ•°    â”‚  â”‚
â”‚  â”‚  - TitleBar  â”‚  â”‚  - useConfig â”‚  â”‚  - database  â”‚  â”‚
â”‚  â”‚  - Theme     â”‚  â”‚  - useTheme  â”‚  â”‚  - store     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†• Tauri IPC
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   åç«¯å±‚ (Rust)                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  é…ç½®ç®¡ç†    â”‚  â”‚  æ•°æ®åº“      â”‚  â”‚  æ–‡ä»¶ç›‘æ§    â”‚  â”‚
â”‚  â”‚  - config    â”‚  â”‚  - SQLite    â”‚  â”‚  - notify    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  WebDAV      â”‚  â”‚  åŒæ­¥å¼•æ“    â”‚  â”‚  é”™è¯¯å¤„ç†    â”‚  â”‚
â”‚  â”‚  - reqwest   â”‚  â”‚  - tokio     â”‚  â”‚  - thiserror â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 å­˜å‚¨å±‚ (æœ¬åœ°)                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  é…ç½®æ–‡ä»¶    â”‚  â”‚  SQLite DB   â”‚  â”‚  æ–‡ä»¶ç³»ç»Ÿ    â”‚  â”‚
â”‚  â”‚  .config.dat â”‚  â”‚  lightsync.dbâ”‚  â”‚  æœ¬åœ°æ–‡ä»¶å¤¹  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- **Node.js**: >= 18.0.0
- **pnpm**: >= 8.0.0
- **Rust**: >= 1.70.0
- **æ“ä½œç³»ç»Ÿ**: Windows 10+, macOS 10.15+, Linux (Ubuntu 20.04+)

### å®‰è£…ä¾èµ–

```bash
# å®‰è£…å‰ç«¯ä¾èµ–
pnpm install

# Rust ä¾èµ–ä¼šåœ¨é¦–æ¬¡æ„å»ºæ—¶è‡ªåŠ¨å®‰è£…
```

### å¼€å‘å‘½ä»¤

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼ˆçƒ­é‡è½½ï¼‰- åŒæ—¶å¯åŠ¨å‰ç«¯å’Œåç«¯
pnpm tauri:dev

# ä»…å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨ï¼ˆç«¯å£ 1420ï¼‰
pnpm dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬ï¼ˆTypeScript ç¼–è¯‘ + Vite æ‰“åŒ…ï¼‰
pnpm build

# æ„å»º Tauri åº”ç”¨ï¼ˆç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ï¼‰
pnpm tauri build

# è¿è¡Œå‰ç«¯é¢„è§ˆ
pnpm preview
```

**æ³¨æ„äº‹é¡¹**:

- å¼€å‘æœåŠ¡å™¨é»˜è®¤è¿è¡Œåœ¨ `http://localhost:1420`
- HMR (çƒ­æ¨¡å—æ›¿æ¢) ç«¯å£ä¸º `1421`
- ä½¿ç”¨ `pnpm tauri:dev` å¯åŒæ—¶å¯åŠ¨å‰åç«¯å¼€å‘ç¯å¢ƒ

### ä»£ç æ£€æŸ¥

```bash
# TypeScript ç±»å‹æ£€æŸ¥ï¼ˆä¸ç”Ÿæˆæ–‡ä»¶ï¼‰
pnpm tsc --noEmit

# Rust ä»£ç æ£€æŸ¥ï¼ˆClippy é™æ€åˆ†æï¼‰
cd src-tauri
cargo clippy

# Rust ä»£ç æ ¼å¼åŒ–
cargo fmt

# æ£€æŸ¥ä»£ç æ ¼å¼ï¼ˆä¸ä¿®æ”¹æ–‡ä»¶ï¼‰
cargo fmt --check

# Rust æµ‹è¯•
cargo test

# Rust æ„å»ºæ£€æŸ¥
cargo check
```

---

## ğŸ“‹ æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

### 1. é…ç½®ç®¡ç†ç³»ç»Ÿ âœ…

**çŠ¶æ€**: å·²å®Œæˆ  
**æ–‡ä»¶**: `src-tauri/src/config.rs`, `src/hooks/useConfig.ts`

**åŠŸèƒ½ç‰¹æ€§**:

- ç»Ÿä¸€çš„é…ç½®æ•°æ®ç»“æ„ (AppConfig)
- é…ç½®åˆå§‹åŒ–å’Œé»˜è®¤å€¼è®¾ç½®
- é…ç½® CRUD æ“ä½œ (å¢åˆ æ”¹æŸ¥)
- é…ç½®æ–‡ä»¶ç›‘å¬å’Œå®æ—¶åŒæ­¥
- åŒæ­¥æ–‡ä»¶å¤¹é…ç½®ç®¡ç†
- WebDAV æœåŠ¡å™¨é…ç½®ç®¡ç†

**æ•°æ®ç»“æ„**:

```typescript
interface AppConfig {
  version: string // åº”ç”¨ç‰ˆæœ¬
  language: string // è¯­è¨€è®¾ç½® (zh-CN, en-US)
  theme: string // ä¸»é¢˜ (light, dark, system)
  autoStart: boolean // å¼€æœºè‡ªå¯åŠ¨
  minimizeToTray: boolean // æœ€å°åŒ–åˆ°æ‰˜ç›˜
  syncFolders: SyncFolder[] // åŒæ­¥æ–‡ä»¶å¤¹åˆ—è¡¨
  webdavServers: WebDavServer[] // WebDAV æœåŠ¡å™¨åˆ—è¡¨
}
```

**å¯ç”¨ Hooks**:

```typescript
// è·å–å®Œæ•´é…ç½®
const { config, loading, error } = useConfig()

// è·å–å•ä¸ªé…ç½®å€¼
const { value, loading, error } = useConfigValue<string>('language')

// æ›´æ–°é…ç½®
const { updateConfig, loading, error } = useConfigUpdate()

// é‡ç½®é…ç½®
const { resetConfig, loading, error } = useConfigReset()
```

**Tauri å‘½ä»¤**:

- `init_config()` - åˆå§‹åŒ–é…ç½®
- `get_config()` - è·å–å®Œæ•´é…ç½®
- `update_config(config)` - æ›´æ–°é…ç½®
- `get_config_value(key)` - è·å–å•ä¸ªé…ç½®å€¼
- `set_config_value(key, value)` - è®¾ç½®å•ä¸ªé…ç½®å€¼
- `reset_config()` - é‡ç½®ä¸ºé»˜è®¤é…ç½®

### 2. æ•°æ®åº“ç³»ç»Ÿ âœ…

**çŠ¶æ€**: å·²å®Œæˆ  
**æ–‡ä»¶**: `src-tauri/migrations/001_initial.sql`, `src/utils/database.ts`

**æ•°æ®è¡¨ç»“æ„**:

**file_metadata** - æ–‡ä»¶å…ƒæ•°æ®è¡¨

```sql
- id: ä¸»é”®
- path: æ–‡ä»¶è·¯å¾„
- hash: æ–‡ä»¶å“ˆå¸Œå€¼
- size: æ–‡ä»¶å¤§å°
- modified_at: ä¿®æ”¹æ—¶é—´
- synced_at: åŒæ­¥æ—¶é—´
- sync_folder_id: æ‰€å±åŒæ­¥æ–‡ä»¶å¤¹
- is_directory: æ˜¯å¦ä¸ºç›®å½•
- status: åŒæ­¥çŠ¶æ€ (synced, pending, conflict, error)
```

**sync_logs** - åŒæ­¥æ—¥å¿—è¡¨

```sql
- id: ä¸»é”®
- sync_folder_id: æ‰€å±åŒæ­¥æ–‡ä»¶å¤¹
- file_path: æ–‡ä»¶è·¯å¾„
- action: æ“ä½œç±»å‹ (upload, download, delete, conflict)
- status: æ“ä½œçŠ¶æ€ (success, failed, pending)
- error_message: é”™è¯¯ä¿¡æ¯
- file_size: æ–‡ä»¶å¤§å°
- duration_ms: æ“ä½œè€—æ—¶
```

**sync_sessions** - åŒæ­¥ä¼šè¯è¡¨

```sql
- id: ä¸»é”®
- sync_folder_id: æ‰€å±åŒæ­¥æ–‡ä»¶å¤¹
- status: ä¼šè¯çŠ¶æ€ (running, completed, failed, cancelled)
- started_at: å¼€å§‹æ—¶é—´
- completed_at: ç»“æŸæ—¶é—´
- files_uploaded/downloaded/deleted/conflict: æ–‡ä»¶ç»Ÿè®¡
- total_bytes: æ€»ä¼ è¾“å­—èŠ‚æ•°
```

**æ•°æ®åº“æ“ä½œ**:

```typescript
// æ–‡ä»¶å…ƒæ•°æ® CRUD
await createFileMetadata(metadata)
await getFileMetadata(id)
await updateFileMetadata(id, metadata)
await deleteFileMetadata(id)
await listFileMetadata(syncFolderId)

// åŒæ­¥æ—¥å¿—
await createSyncLog(log)
await listSyncLogs(syncFolderId, limit)

// åŒæ­¥ä¼šè¯
await createSyncSession(session)
await updateSyncSession(id, session)
await getSyncSession(id)
```

### 3. é”™è¯¯å¤„ç†ç³»ç»Ÿ âœ…

**çŠ¶æ€**: å·²å®Œæˆ  
**æ–‡ä»¶**: `src-tauri/src/error.rs`

**é”™è¯¯ç±»å‹**:

```rust
pub enum SyncError {
    ConfigError(String),      // é…ç½®é”™è¯¯
    DatabaseError(String),    // æ•°æ®åº“é”™è¯¯
    NetworkError(String),     // ç½‘ç»œé”™è¯¯
    FileSystemError(String),  // æ–‡ä»¶ç³»ç»Ÿé”™è¯¯
    WebDavError(String),      // WebDAV é”™è¯¯
    SerializationError(String), // åºåˆ—åŒ–é”™è¯¯
    Unknown(String),          // æœªçŸ¥é”™è¯¯
}
```

**ç‰¹æ€§**:

- ç»Ÿä¸€çš„é”™è¯¯ç±»å‹å®šä¹‰
- è‡ªåŠ¨é”™è¯¯åºåˆ—åŒ–ä¸º JSON
- è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯å’Œä¸Šä¸‹æ–‡
- æ”¯æŒé”™è¯¯é“¾è¿½è¸ª

### 4. è‡ªå®šä¹‰æ ‡é¢˜æ  âœ…

**çŠ¶æ€**: å·²å®Œæˆ  
**æ–‡ä»¶**: `src/components/TitleBar.tsx`

**åŠŸèƒ½ç‰¹æ€§**:

- æ— è¾¹æ¡†çª—å£è®¾è®¡
- æ‹–æ‹½ç§»åŠ¨çª—å£
- æœ€å°åŒ–/æœ€å¤§åŒ–/å…³é—­æŒ‰é’®
- æœ€å¤§åŒ–çŠ¶æ€è‡ªåŠ¨åˆ‡æ¢å›¾æ ‡
- æ”¯æŒæ·±è‰²/æµ…è‰²ä¸»é¢˜
- ä¼˜é›…çš„æ‚¬åœåŠ¨ç”»æ•ˆæœ

**é…ç½®**:

```json
// tauri.conf.json
{
  "decorations": false, // ç¦ç”¨ç³»ç»Ÿæ ‡é¢˜æ 
  "transparent": false,
  "resizable": true
}
```

### 5. ä¸»é¢˜ç³»ç»Ÿ âœ…

**çŠ¶æ€**: å·²å®Œæˆ  
**æ–‡ä»¶**: `src/components/ThemeSwitch.tsx`

**æ”¯æŒä¸»é¢˜**:

- æµ…è‰²æ¨¡å¼ (Light)
- æ·±è‰²æ¨¡å¼ (Dark)
- è·Ÿéšç³»ç»Ÿ (System)

**å®ç°æ–¹å¼**:

- next-themes ä¸»é¢˜ç®¡ç†
- TailwindCSS dark: ç±»å
- è‡ªåŠ¨æŒä¹…åŒ–ä¸»é¢˜é€‰æ‹©

---

## ğŸ”„ å¼€å‘è¿›åº¦

### Phase 1: é¡¹ç›®åŸºç¡€æ­å»º (Week 1) - ğŸŸ¡ è¿›è¡Œä¸­

**ç›®æ ‡**: å®Œæˆé¡¹ç›®æ¡†æ¶æ­å»ºï¼Œå®ç°åŸºç¡€UIéª¨æ¶ï¼Œé…ç½®å¼€å‘ç¯å¢ƒ

**è¿›åº¦**: 67% (4/6 ä»»åŠ¡å®Œæˆ)

- [x] **Task 1.1**: é¡¹ç›®åˆå§‹åŒ– âœ…
  - åˆ›å»º Tauri é¡¹ç›®
  - é…ç½®ä¾èµ–å’Œæ„å»ºå·¥å…·
  - éªŒè¯é¡¹ç›®å¯è¿è¡Œ

- [x] **Task 1.2**: ç»Ÿä¸€é”™è¯¯å¤„ç†ç³»ç»Ÿ âœ…
  - åˆ›å»º error.rs æ¨¡å—
  - å®šä¹‰ç»Ÿä¸€é”™è¯¯ç±»å‹
  - å®ç°é”™è¯¯åºåˆ—åŒ–

- [x] **Task 1.3**: é…ç½®ç®¡ç†ç³»ç»Ÿ âœ…
  - åˆ›å»º config.rs æ¨¡å—
  - å®ç°é…ç½® CRUD æ“ä½œ
  - åˆ›å»ºå‰ç«¯ useConfig Hook
  - å®ç°é…ç½®æ–‡ä»¶ç›‘å¬

- [x] **Task 1.4**: SQLite æ•°æ®åº“åˆå§‹åŒ– âœ…
  - æ³¨å†Œ SQL æ’ä»¶
  - åˆ›å»ºæ•°æ®åº“è¿ç§»æ–‡ä»¶
  - å®ç°æ•°æ®åº“æ“ä½œå‡½æ•°
  - åˆ›å»ºæµ‹è¯•ç»„ä»¶

- [ ] **Task 1.5**: å›½é™…åŒ–ç³»ç»Ÿæ­å»º
  - å®‰è£… react-i18next
  - åˆ›å»ºç¿»è¯‘æ–‡ä»¶
  - åˆ›å»ºè¯­è¨€åˆ‡æ¢ç»„ä»¶

- [ ] **Task 1.6**: åŸºç¡€UIæ¡†æ¶æ­å»º
  - åˆ›å»ºä¸»å¸ƒå±€ç»„ä»¶
  - åˆ›å»ºè·¯ç”±é…ç½®
  - åˆ›å»ºé¦–é¡µç»„ä»¶

### Phase 2-10: å¾…å¼€å§‹

è¯¦ç»†è¿›åº¦è¯·æŸ¥çœ‹ `docs/md/é¡¹ç›®è¿›åº¦æ¸…å•.md`

**æ€»ä½“è¿›åº¦**: 12% (4/34 æ ¸å¿ƒä»»åŠ¡å®Œæˆ)

---

## ğŸ› ï¸ å¼€å‘è§„èŒƒ

### ä»£ç é£æ ¼

**TypeScript/React**:

- ä½¿ç”¨å‡½æ•°å¼ç»„ä»¶å’Œ Hooks
- ä¼˜å…ˆä½¿ç”¨ TypeScript ç±»å‹æ¨å¯¼
- ç»„ä»¶ä½¿ç”¨ PascalCase å‘½å
- å‡½æ•°å’Œå˜é‡ä½¿ç”¨ camelCase å‘½å
- ä½¿ç”¨ ES6+ è¯­æ³•

**Rust**:

- éµå¾ª Rust å®˜æ–¹ä»£ç é£æ ¼
- ä½¿ç”¨ `cargo fmt` æ ¼å¼åŒ–ä»£ç 
- ä½¿ç”¨ `cargo clippy` æ£€æŸ¥ä»£ç 
- å‡½æ•°å’Œå˜é‡ä½¿ç”¨ snake_case å‘½å
- ç±»å‹ä½¿ç”¨ PascalCase å‘½å

### æäº¤è§„èŒƒ

ä½¿ç”¨è¯­ä¹‰åŒ–æäº¤ä¿¡æ¯ï¼š

```
feat: æ–°åŠŸèƒ½
fix: ä¿®å¤ bug
docs: æ–‡æ¡£æ›´æ–°
style: ä»£ç æ ¼å¼è°ƒæ•´
refactor: ä»£ç é‡æ„
test: æµ‹è¯•ç›¸å…³
chore: æ„å»º/å·¥å…·ç›¸å…³
```

ç¤ºä¾‹ï¼š

```
feat: å®ç°é…ç½®æ–‡ä»¶ç›‘å¬åŠŸèƒ½
fix: ä¿®å¤æ•°æ®åº“è¿æ¥è¶…æ—¶é—®é¢˜
docs: æ›´æ–° API æ–‡æ¡£
```

### åˆ†æ”¯ç®¡ç†

```
master          # ä¸»åˆ†æ”¯ï¼Œç¨³å®šç‰ˆæœ¬
develop         # å¼€å‘åˆ†æ”¯
feature/*       # åŠŸèƒ½åˆ†æ”¯
bugfix/*        # ä¿®å¤åˆ†æ”¯
release/*       # å‘å¸ƒåˆ†æ”¯
```

---

## ğŸ“š é‡è¦æ–‡æ¡£

### éœ€æ±‚ä¸è®¾è®¡

- [é¡¹ç›®éœ€æ±‚åˆ†æ](docs/md/é¡¹ç›®éœ€æ±‚åˆ†æ.md) - è¯¦ç»†çš„åŠŸèƒ½éœ€æ±‚å’Œç”¨ä¾‹åˆ†æ
- [é¡¹ç›®å®ç°æ­¥éª¤](docs/md/é¡¹ç›®å®ç°æ­¥éª¤.md) - åˆ†é˜¶æ®µå®æ–½è®¡åˆ’
- [é¡¹ç›®è¿›åº¦æ¸…å•](docs/md/é¡¹ç›®è¿›åº¦æ¸…å•.md) - å¼€å‘è¿›åº¦è·Ÿè¸ª

### æŠ€æœ¯æ–‡æ¡£

- [è‡ªå®šä¹‰æ ‡é¢˜æ è¯´æ˜](docs/md/è‡ªå®šä¹‰æ ‡é¢˜æ è¯´æ˜.md) - æ ‡é¢˜æ å®ç°ç»†èŠ‚
- [å¸¸é‡ç®¡ç†æœ€ä½³å®è·µ](docs/md/å¸¸é‡ç®¡ç†æœ€ä½³å®è·µ.md) - å¸¸é‡å®šä¹‰è§„èŒƒ
- [SQLiteä½¿ç”¨å¿…è¦æ€§åˆ†æ](docs/md/SQLiteä½¿ç”¨å¿…è¦æ€§åˆ†æ.md) - æ•°æ®åº“é€‰å‹åˆ†æ

### å®ŒæˆæŠ¥å‘Š

- [Task1.2å®ŒæˆæŠ¥å‘Š](docs/md/Task1.2å®ŒæˆæŠ¥å‘Š.md) - é”™è¯¯å¤„ç†ç³»ç»Ÿ
- [Task1.3å®ŒæˆæŠ¥å‘Š](docs/md/Task1.3å®ŒæˆæŠ¥å‘Š.md) - é…ç½®ç®¡ç†ç³»ç»Ÿ
- [Task1.4å®ŒæˆæŠ¥å‘Š](docs/md/Task1.4å®ŒæˆæŠ¥å‘Š.md) - æ•°æ®åº“ç³»ç»Ÿ

---

## ğŸ”§ å¸¸è§é—®é¢˜

### æ„å»ºé—®é¢˜

**Q: Rust ç¼–è¯‘å¤±è´¥ï¼Œæç¤ºæ‰¾ä¸åˆ°ä¾èµ–**  
A: å°è¯•æ¸…ç†ç¼“å­˜å¹¶é‡æ–°æ„å»ºï¼š

```bash
cd src-tauri
cargo clean
cargo build
```

**Q: å‰ç«¯å¼€å‘æœåŠ¡å™¨å¯åŠ¨å¤±è´¥**  
A: æ£€æŸ¥ç«¯å£ 1420 æ˜¯å¦è¢«å ç”¨ï¼Œæˆ–åˆ é™¤ `node_modules` é‡æ–°å®‰è£…ï¼š

```bash
rm -rf node_modules
pnpm install
```

### è¿è¡Œé—®é¢˜

**Q: åº”ç”¨å¯åŠ¨åçª—å£æ— æ³•æ‹–åŠ¨**  
A: ç¡®ä¿ TitleBar ç»„ä»¶æ­£ç¡®è®¾ç½®äº† `data-tauri-drag-region` å±æ€§

**Q: é…ç½®æ–‡ä»¶ä¸¢å¤±æˆ–æŸå**  
A: ä½¿ç”¨ `reset_config()` å‘½ä»¤é‡ç½®ä¸ºé»˜è®¤é…ç½®

### å¼€å‘é—®é¢˜

**Q: å¦‚ä½•è°ƒè¯• Rust åç«¯ä»£ç ï¼Ÿ**  
A: åœ¨ `src-tauri/src/lib.rs` ä¸­æ·»åŠ æ—¥å¿—ï¼š

```rust
println!("Debug: {:?}", variable);
```

**Q: å¦‚ä½•æŸ¥çœ‹æ•°æ®åº“å†…å®¹ï¼Ÿ**  
A: ä½¿ç”¨ SQLite å®¢æˆ·ç«¯è¿æ¥åˆ° `~/.local/share/com.lightsync/lightsync.db`

---

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

### ç›®æ ‡æ€§èƒ½

| æŒ‡æ ‡            | ç›®æ ‡å€¼ | å½“å‰çŠ¶æ€  |
| --------------- | ------ | --------- |
| å¯åŠ¨æ—¶é—´        | < 2ç§’  | ğŸŸ¡ å¾…æµ‹è¯• |
| å†…å­˜å ç”¨ (ç©ºé—²) | < 30MB | ğŸŸ¡ å¾…æµ‹è¯• |
| å†…å­˜å ç”¨ (åŒæ­¥) | < 50MB | ğŸŸ¡ å¾…æµ‹è¯• |
| CPU ä½¿ç”¨ (ç©ºé—²) | < 1%   | ğŸŸ¡ å¾…æµ‹è¯• |
| CPU ä½¿ç”¨ (åŒæ­¥) | < 10%  | ğŸŸ¡ å¾…æµ‹è¯• |

### å®¹é‡é™åˆ¶

| é¡¹ç›®           | æœ€å¤§æ”¯æŒ |
| -------------- | -------- |
| WebDAV æœåŠ¡å™¨  | 10 ä¸ª    |
| åŒæ­¥æ–‡ä»¶å¤¹     | 100 ä¸ª   |
| å•æ–‡ä»¶å¤¹æ–‡ä»¶æ•° | 10ä¸‡ ä¸ª  |
| å•æ–‡ä»¶å¤§å°     | 10 GB    |
| æ€»åŒæ­¥æ•°æ®é‡   | 1 TB     |

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

### å‚ä¸å¼€å‘

1. Fork é¡¹ç›®ä»“åº“
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'feat: Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»º Pull Request

### æŠ¥å‘Šé—®é¢˜

åœ¨ GitHub Issues ä¸­æäº¤é—®é¢˜æ—¶ï¼Œè¯·åŒ…å«ï¼š

- æ“ä½œç³»ç»Ÿå’Œç‰ˆæœ¬
- åº”ç”¨ç‰ˆæœ¬
- è¯¦ç»†çš„é—®é¢˜æè¿°
- å¤ç°æ­¥éª¤
- é”™è¯¯æ—¥å¿—ï¼ˆå¦‚æœ‰ï¼‰

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

---

## ğŸ™ è‡´è°¢

### æŠ€æœ¯æ ˆ

- [Tauri](https://tauri.app/) - è·¨å¹³å°æ¡Œé¢åº”ç”¨æ¡†æ¶
- [React](https://react.dev/) - UI æ¡†æ¶
- [NextUI](https://nextui.org/) - React UI ç»„ä»¶åº“
- [TailwindCSS](https://tailwindcss.com/) - CSS æ¡†æ¶
- [Rust](https://www.rust-lang.org/) - ç³»ç»Ÿç¼–ç¨‹è¯­è¨€

### å‚è€ƒé¡¹ç›®

- [Syncthing](https://syncthing.net/) - æ–‡ä»¶åŒæ­¥ç®—æ³•å‚è€ƒ
- [rclone](https://rclone.org/) - WebDAV å®ç°å‚è€ƒ

---

## ğŸ“ è”ç³»æ–¹å¼

- **é¡¹ç›®ä»“åº“**: [github.com/Adcage/LightSync](https://github.com/Adcage/LightSync)
- **é—®é¢˜åé¦ˆ**: [GitHub Issues](https://github.com/Adcage/LightSync/issues)

---

**æœ€åæ›´æ–°**: 2025-11-10  
**ç»´æŠ¤è€…**: LightSync å¼€å‘å›¢é˜Ÿ
